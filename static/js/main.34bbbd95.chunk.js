(this["webpackJsonpgoit-react-hw-04-hooks-image"]=this["webpackJsonpgoit-react-hw-04-hooks-image"]||[]).push([[0],{10:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1zRbj",Modal:"Modal_Modal__2QkZ4"}},11:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2UkB1",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__21jF8"}},13:function(e,t,a){e.exports={container:"Container_container__H3QsD"}},14:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3ZozS"}},16:function(e,t,a){e.exports={Button:"Button_Button__11mri"}},22:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a(0),n=a.n(r),o=a(4),i=a.n(o),s=(a(22),a(12)),l=a(3),u=a(5),j=(a(23),function(e,t){var a="https://pixabay.com/api/?key=".concat("18724736-77330c9d8a28eb7073d2e9b7d","&q=").concat(e,"&page=").concat(t,"&image_type=photo&orientation=horizontal&per_page=4");return fetch(a).then((function(e){return e.ok?e.json():Promise.reject(new Error("Oops.. error"))}))}),m=a(13),b=a.n(m);var d=function(e){var t=e.children;return Object(c.jsx)("div",{className:b.a.container,children:t})},h=a(6),O=a.n(h);function g(e){var t=e.onSubmit,a=Object(r.useState)(""),n=Object(l.a)(a,2),o=n[0],i=n[1];return Object(c.jsx)("header",{className:O.a.Searchbar,children:Object(c.jsxs)("form",{className:O.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),i("")):u.b.info("The field is empty. Please enter a specific query.")},children:[Object(c.jsx)("button",{type:"submit",className:O.a.SearchForm_button,children:Object(c.jsx)("span",{className:O.a.SearchForm_button_label,children:"Search"})}),Object(c.jsx)("input",{className:O.a.SearchForm_input,type:"text",value:o,onChange:function(e){i(e.currentTarget.value.toLowerCase())},autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var f=a(10),_=a.n(f),x=document.querySelector("#modal-root");function p(e){var t=e.image,a=e.onClose;Object(r.useEffect)((function(){return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}));var n=function(e){"Escape"===e.code&&a()};return Object(o.createPortal)(Object(c.jsx)("div",{className:_.a.Overlay,onClick:function(e){e.currentTarget===e.target&&a()},children:Object(c.jsx)("div",{className:_.a.Modal,children:Object(c.jsx)("img",{src:t,alt:"fullscreen size"})})}),x)}var S=a(11),v=a.n(S);function y(e){var t=e.imageUrl,a=e.imageAlt,n=e.imageForModal,o=Object(r.useState)(!1),i=Object(l.a)(o,2),s=i[0],u=i[1],j=function(){u(!s)};return Object(c.jsxs)(c.Fragment,{children:[s&&Object(c.jsx)(p,{onClose:j,image:n}),Object(c.jsx)("li",{className:v.a.ImageGalleryItem,children:Object(c.jsx)("img",{src:t,alt:a,className:v.a.ImageGalleryItem_image,onClick:j})})]})}var I=a(14),F=a.n(I);function w(e){var t=e.images;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("ul",{className:F.a.ImageGallery,children:t.map((function(e){return Object(c.jsx)(y,{imageUrl:e.webformatURL,imageAlt:e.tags,imageForModal:e.largeImageURL},e.id)}))})})}var k=a(15),N=a.n(k);a(45);function G(){return Object(c.jsx)(N.a,{type:"ThreeDots",color:"#00BFFF",height:100,width:100,timeout:1e3})}var C=a(16),E=a.n(C),B=function(e){var t=e.click;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("button",{type:"button",className:E.a.Button,onClick:t,children:"Load more"})})};function M(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(1),i=Object(l.a)(o,2),m=i[0],b=i[1],h=Object(r.useState)([]),O=Object(l.a)(h,2),f=O[0],_=O[1],x=Object(r.useState)(!1),p=Object(l.a)(x,2),S=p[0],v=p[1],y=Object(r.useState)(null),I=Object(l.a)(y,2),F=I[0],k=I[1],N=Object(r.useState)("idle"),C=Object(l.a)(N,2),E=C[0],M=C[1],L=Object(r.useState)(!1),U=Object(l.a)(L,2),T=U[0],z=U[1];Object(r.useEffect)((function(){a&&(_([]),M("pending"),P())}),[a]),Object(r.useEffect)((function(){1!==m&&P()}),[m]);var P=function(){z(!0),v(!1),j(a,m).then((function(e){var t=e.hits;0===t.length?(u.b.error("Images not found or no more images"),M("resolved"),z(!1)):(_((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))})),M("resolved"),v(!0),z(!1),1!==m&&D())})).catch((function(e){k(e),M("rejected")}))},q=function(e){b(1),n(e)},D=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};return"idle"===E?Object(c.jsxs)(d,{children:[Object(c.jsx)(g,{onSubmit:q}),Object(c.jsx)(u.a,{})]}):"pending"===E?Object(c.jsxs)(d,{children:[Object(c.jsx)(g,{onSubmit:q}),Object(c.jsx)("div",{className:"spinner",children:Object(c.jsx)(G,{})})]}):"rejected"===E?Object(c.jsxs)(d,{children:[Object(c.jsx)(g,{onSubmit:q}),Object(c.jsx)("div",{children:F.message})]}):"resolved"===E?Object(c.jsxs)(d,{children:[Object(c.jsx)(g,{onSubmit:q}),Object(c.jsx)(w,{images:f}),T&&Object(c.jsx)("div",{className:"spinner",children:Object(c.jsx)(G,{})}),S&&Object(c.jsx)(B,{click:function(){b((function(e){return e+1}))}}),Object(c.jsx)(u.a,{})]}):void 0}i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__YVHjU",SearchForm:"Searchbar_SearchForm__3d2PB",SearchForm_button:"Searchbar_SearchForm_button__1iimi",SearchForm_button_label:"Searchbar_SearchForm_button_label__1w9VZ",SearchForm_input:"Searchbar_SearchForm_input__124r6"}}},[[46,1,2]]]);
//# sourceMappingURL=main.34bbbd95.chunk.js.map